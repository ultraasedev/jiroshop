2025-01-03 15:37:34 [ERROR]: ❌ Erreur lors de l'initialisation: Plan executor error during findAndModify :: caused by :: E11000 duplicate key error collection: test.categories index: slug_1 dup key: { slug: null } | {"metadata":{"errorResponse":{"ok":0,"errmsg":"Plan executor error during findAndModify :: caused by :: E11000 duplicate key error collection: test.categories index: slug_1 dup key: { slug: null }","code":11000,"codeName":"DuplicateKey","keyPattern":{"slug":1},"keyValue":{"slug":null},"$clusterTime":{"clusterTime":{"$timestamp":"7455698372679172100"},"signature":{"hash":"CACRYJlJ5JyR3Ae+mjvF5BIWKpc=","keyId":{"low":5,"high":1726158476,"unsigned":false}}},"operationTime":{"$timestamp":"7455698372679172100"}},"ok":0,"code":11000,"codeName":"DuplicateKey","keyPattern":{"slug":1},"keyValue":{"slug":null},"$clusterTime":{"clusterTime":{"$timestamp":"7455698372679172100"},"signature":{"hash":"CACRYJlJ5JyR3Ae+mjvF5BIWKpc=","keyId":{"low":5,"high":1726158476,"unsigned":false}}},"operationTime":{"$timestamp":"7455698372679172100"},"stack":"MongoServerError: Plan executor error during findAndModify :: caused by :: E11000 duplicate key error collection: test.categories index: slug_1 dup key: { slug: null }\n    at Connection.sendCommand (C:\\Users\\MSI\\Desktop\\project\\jiro\\node_modules\\mongodb\\lib\\cmap\\connection.js:296:27)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Connection.command (C:\\Users\\MSI\\Desktop\\project\\jiro\\node_modules\\mongodb\\lib\\cmap\\connection.js:323:26)\n    at async Server.command (C:\\Users\\MSI\\Desktop\\project\\jiro\\node_modules\\mongodb\\lib\\sdam\\server.js:170:29)\n    at async FindOneAndUpdateOperation.executeCommand (C:\\Users\\MSI\\Desktop\\project\\jiro\\node_modules\\mongodb\\lib\\operations\\command.js:76:16)\n    at async FindOneAndUpdateOperation.execute (C:\\Users\\MSI\\Desktop\\project\\jiro\\node_modules\\mongodb\\lib\\operations\\find_and_modify.js:85:24)\n    at async tryOperation (C:\\Users\\MSI\\Desktop\\project\\jiro\\node_modules\\mongodb\\lib\\operations\\execute_operation.js:203:20)\n    at async executeOperation (C:\\Users\\MSI\\Desktop\\project\\jiro\\node_modules\\mongodb\\lib\\operations\\execute_operation.js:73:16)\n    at async Collection.findOneAndUpdate (C:\\Users\\MSI\\Desktop\\project\\jiro\\node_modules\\mongodb\\lib\\collection.js:500:16)\n    at async model.Query._findOneAndUpdate (C:\\Users\\MSI\\Desktop\\project\\jiro\\node_modules\\mongoose\\lib\\query.js:3459:13)"}}
2025-01-03 15:39:44 [ERROR]: Erreur lors de l'initialisation du bot: AdminController is not a constructor | {"metadata":{"stack":"TypeError: AdminController is not a constructor\n    at TelegramShopBot.setupControllers (C:\\Users\\MSI\\Desktop\\project\\jiro\\index.js:74:32)\n    at TelegramShopBot.initializeBot (C:\\Users\\MSI\\Desktop\\project\\jiro\\index.js:39:18)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)"}}
2025-01-03 16:12:31 [ERROR]: Erreur lors de l'initialisation du bot: AdminController is not a constructor | {"metadata":{"stack":"TypeError: AdminController is not a constructor\n    at TelegramShopBot.setupControllers (C:\\Users\\MSI\\Desktop\\project\\jiro\\index.js:74:32)\n    at TelegramShopBot.initializeBot (C:\\Users\\MSI\\Desktop\\project\\jiro\\index.js:39:18)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)"}}
2025-01-03 16:36:10 [ERROR]: Erreur lors de l'initialisation du bot: Cannot read properties of undefined (reading 'bind') | {"metadata":{"stack":"TypeError: Cannot read properties of undefined (reading 'bind')\n    at AdminController.initializeAdminCommands (C:\\Users\\MSI\\Desktop\\project\\jiro\\controllers\\AdminController.js:46:78)\n    at new AdminController (C:\\Users\\MSI\\Desktop\\project\\jiro\\controllers\\AdminController.js:13:14)\n    at TelegramShopBot.setupControllers (C:\\Users\\MSI\\Desktop\\project\\jiro\\index.js:74:32)\n    at TelegramShopBot.initializeBot (C:\\Users\\MSI\\Desktop\\project\\jiro\\index.js:39:18)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)"}}
2025-01-03 16:43:41 [ERROR]: Erreur lors de l'initialisation du bot: Cannot read properties of undefined (reading 'bind') | {"metadata":{"stack":"TypeError: Cannot read properties of undefined (reading 'bind')\n    at AdminController.initializeAdminCommands (C:\\Users\\MSI\\Desktop\\project\\jiro\\controllers\\AdminController.js:49:78)\n    at new AdminController (C:\\Users\\MSI\\Desktop\\project\\jiro\\controllers\\AdminController.js:16:14)\n    at TelegramShopBot.setupControllers (C:\\Users\\MSI\\Desktop\\project\\jiro\\index.js:74:32)\n    at TelegramShopBot.initializeBot (C:\\Users\\MSI\\Desktop\\project\\jiro\\index.js:39:18)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)"}}
2025-01-03 16:54:33 [ERROR]: Erreur lors de l'initialisation du bot: Cannot read properties of undefined (reading 'bind') | {"metadata":{"stack":"TypeError: Cannot read properties of undefined (reading 'bind')\n    at OrderController.initializeOrderHandlers (C:\\Users\\MSI\\Desktop\\project\\jiro\\controllers\\OrderController.js:23:52)\n    at new OrderController (C:\\Users\\MSI\\Desktop\\project\\jiro\\controllers\\OrderController.js:14:14)\n    at TelegramShopBot.setupControllers (C:\\Users\\MSI\\Desktop\\project\\jiro\\index.js:76:32)\n    at TelegramShopBot.initializeBot (C:\\Users\\MSI\\Desktop\\project\\jiro\\index.js:39:18)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)"}}
2025-01-03 16:55:18 [ERROR]: Erreur lors de l'initialisation du bot: Cannot read properties of undefined (reading 'bind') | {"metadata":{"stack":"TypeError: Cannot read properties of undefined (reading 'bind')\n    at OrderController.initializeOrderHandlers (C:\\Users\\MSI\\Desktop\\project\\jiro\\controllers\\OrderController.js:23:52)\n    at new OrderController (C:\\Users\\MSI\\Desktop\\project\\jiro\\controllers\\OrderController.js:14:14)\n    at TelegramShopBot.setupControllers (C:\\Users\\MSI\\Desktop\\project\\jiro\\index.js:76:32)\n    at TelegramShopBot.initializeBot (C:\\Users\\MSI\\Desktop\\project\\jiro\\index.js:39:18)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)"}}
2025-01-03 16:57:49 [ERROR]: Erreur lors de l'initialisation du bot: this.orderController.startPeriodicTasks is not a function | {"metadata":{"stack":"TypeError: this.orderController.startPeriodicTasks is not a function\n    at TelegramShopBot.setupControllers (C:\\Users\\MSI\\Desktop\\project\\jiro\\index.js:79:30)\n    at TelegramShopBot.initializeBot (C:\\Users\\MSI\\Desktop\\project\\jiro\\index.js:39:18)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)"}}
2025-01-03 17:11:52 [ERROR]: Erreur lors de la récupération/création de l'utilisateur: Cannot read properties of undefined (reading 'toLowerCase') | {"metadata":{"stack":"TypeError: Cannot read properties of undefined (reading 'toLowerCase')\n    at model.<anonymous> (C:\\Users\\MSI\\Desktop\\project\\jiro\\models\\User.js:490:49)\n    at callMiddlewareFunction (C:\\Users\\MSI\\Desktop\\project\\jiro\\node_modules\\kareem\\index.js:628:27)\n    at model.next (C:\\Users\\MSI\\Desktop\\project\\jiro\\node_modules\\kareem\\index.js:93:7)\n    at _next (C:\\Users\\MSI\\Desktop\\project\\jiro\\node_modules\\kareem\\index.js:146:10)\n    at C:\\Users\\MSI\\Desktop\\project\\jiro\\node_modules\\kareem\\index.js:653:30\n    at process.processTicksAndRejections (node:internal/process/task_queues:85:11)"}}
2025-01-03 17:11:52 [ERROR]: Erreur dans le gestionnaire de session: Cannot read properties of undefined (reading 'toLowerCase') | {"metadata":{"stack":"TypeError: Cannot read properties of undefined (reading 'toLowerCase')\n    at model.<anonymous> (C:\\Users\\MSI\\Desktop\\project\\jiro\\models\\User.js:490:49)\n    at callMiddlewareFunction (C:\\Users\\MSI\\Desktop\\project\\jiro\\node_modules\\kareem\\index.js:628:27)\n    at model.next (C:\\Users\\MSI\\Desktop\\project\\jiro\\node_modules\\kareem\\index.js:93:7)\n    at _next (C:\\Users\\MSI\\Desktop\\project\\jiro\\node_modules\\kareem\\index.js:146:10)\n    at C:\\Users\\MSI\\Desktop\\project\\jiro\\node_modules\\kareem\\index.js:653:30\n    at process.processTicksAndRejections (node:internal/process/task_queues:85:11)"}}
2025-01-04 10:53:07 [ERROR]: Erreur surveillance commandes en attente: getaddrinfo ENOTFOUND jiroshop-shard-00-01.umpsu.mongodb.net | {"metadata":{"reason":{"type":"ReplicaSetNoPrimary","servers":{"jiroshop-shard-00-01.umpsu.mongodb.net:27017":{"address":"jiroshop-shard-00-01.umpsu.mongodb.net:27017","type":"Unknown","hosts":[],"passives":[],"arbiters":[],"tags":{},"minWireVersion":0,"maxWireVersion":0,"roundTripTime":-1,"minRoundTripTime":0,"lastUpdateTime":230495625,"lastWriteDate":0,"error":{},"topologyVersion":null,"setName":null,"setVersion":null,"electionId":null,"logicalSessionTimeoutMinutes":null,"maxMessageSizeBytes":null,"maxWriteBatchSize":null,"maxBsonObjectSize":null,"primary":null,"me":null,"$clusterTime":null,"iscryptd":false},"jiroshop-shard-00-02.umpsu.mongodb.net:27017":{"address":"jiroshop-shard-00-02.umpsu.mongodb.net:27017","type":"Unknown","hosts":[],"passives":[],"arbiters":[],"tags":{},"minWireVersion":0,"maxWireVersion":0,"roundTripTime":-1,"minRoundTripTime":0,"lastUpdateTime":230495626,"lastWriteDate":0,"error":{},"topologyVersion":null,"setName":null,"setVersion":null,"electionId":null,"logicalSessionTimeoutMinutes":null,"maxMessageSizeBytes":null,"maxWriteBatchSize":null,"maxBsonObjectSize":null,"primary":null,"me":null,"$clusterTime":null,"iscryptd":false},"jiroshop-shard-00-00.umpsu.mongodb.net:27017":{"address":"jiroshop-shard-00-00.umpsu.mongodb.net:27017","type":"Unknown","hosts":[],"passives":[],"arbiters":[],"tags":{},"minWireVersion":0,"maxWireVersion":0,"roundTripTime":-1,"minRoundTripTime":0,"lastUpdateTime":230495627,"lastWriteDate":0,"error":{},"topologyVersion":null,"setName":null,"setVersion":null,"electionId":null,"logicalSessionTimeoutMinutes":null,"maxMessageSizeBytes":null,"maxWriteBatchSize":null,"maxBsonObjectSize":null,"primary":null,"me":null,"$clusterTime":null,"iscryptd":false}},"stale":false,"compatible":true,"heartbeatFrequencyMS":10000,"localThresholdMS":15,"setName":"atlas-qy49pv-shard-0","maxElectionId":{"$oid":"7fffffff00000000000000ba"},"maxSetVersion":15,"commonWireVersion":0,"logicalSessionTimeoutMinutes":null},"stack":"MongoServerSelectionError: getaddrinfo ENOTFOUND jiroshop-shard-00-01.umpsu.mongodb.net\n    at Topology.selectServer (C:\\Users\\MSI\\Desktop\\project\\jiro\\node_modules\\mongodb\\lib\\sdam\\topology.js:320:38)\n    at async tryOperation (C:\\Users\\MSI\\Desktop\\project\\jiro\\node_modules\\mongodb\\lib\\operations\\execute_operation.js:143:18)\n    at async executeOperation (C:\\Users\\MSI\\Desktop\\project\\jiro\\node_modules\\mongodb\\lib\\operations\\execute_operation.js:73:16)\n    at async FindCursor._initialize (C:\\Users\\MSI\\Desktop\\project\\jiro\\node_modules\\mongodb\\lib\\cursor\\find_cursor.js:60:26)\n    at async FindCursor.cursorInit (C:\\Users\\MSI\\Desktop\\project\\jiro\\node_modules\\mongodb\\lib\\cursor\\abstract_cursor.js:607:27)\n    at async FindCursor.fetchBatch (C:\\Users\\MSI\\Desktop\\project\\jiro\\node_modules\\mongodb\\lib\\cursor\\abstract_cursor.js:641:13)\n    at async FindCursor.next (C:\\Users\\MSI\\Desktop\\project\\jiro\\node_modules\\mongodb\\lib\\cursor\\abstract_cursor.js:323:17)\n    at async [Symbol.asyncIterator] (C:\\Users\\MSI\\Desktop\\project\\jiro\\node_modules\\mongodb\\lib\\cursor\\abstract_cursor.js:240:34)\n    at async FindCursor.toArray (C:\\Users\\MSI\\Desktop\\project\\jiro\\node_modules\\mongodb\\lib\\cursor\\abstract_cursor.js:400:26)\n    at async model.Query._find (C:\\Users\\MSI\\Desktop\\project\\jiro\\node_modules\\mongoose\\lib\\query.js:2363:14)","cause":{}}}
2025-01-04 10:53:07 [ERROR]: Erreur surveillance messages non lus: getaddrinfo ENOTFOUND jiroshop-shard-00-01.umpsu.mongodb.net | {"metadata":{"reason":{"type":"ReplicaSetNoPrimary","servers":{"jiroshop-shard-00-01.umpsu.mongodb.net:27017":{"address":"jiroshop-shard-00-01.umpsu.mongodb.net:27017","type":"Unknown","hosts":[],"passives":[],"arbiters":[],"tags":{},"minWireVersion":0,"maxWireVersion":0,"roundTripTime":-1,"minRoundTripTime":0,"lastUpdateTime":230495625,"lastWriteDate":0,"error":{},"topologyVersion":null,"setName":null,"setVersion":null,"electionId":null,"logicalSessionTimeoutMinutes":null,"maxMessageSizeBytes":null,"maxWriteBatchSize":null,"maxBsonObjectSize":null,"primary":null,"me":null,"$clusterTime":null,"iscryptd":false},"jiroshop-shard-00-02.umpsu.mongodb.net:27017":{"address":"jiroshop-shard-00-02.umpsu.mongodb.net:27017","type":"Unknown","hosts":[],"passives":[],"arbiters":[],"tags":{},"minWireVersion":0,"maxWireVersion":0,"roundTripTime":-1,"minRoundTripTime":0,"lastUpdateTime":230495626,"lastWriteDate":0,"error":{},"topologyVersion":null,"setName":null,"setVersion":null,"electionId":null,"logicalSessionTimeoutMinutes":null,"maxMessageSizeBytes":null,"maxWriteBatchSize":null,"maxBsonObjectSize":null,"primary":null,"me":null,"$clusterTime":null,"iscryptd":false},"jiroshop-shard-00-00.umpsu.mongodb.net:27017":{"address":"jiroshop-shard-00-00.umpsu.mongodb.net:27017","type":"Unknown","hosts":[],"passives":[],"arbiters":[],"tags":{},"minWireVersion":0,"maxWireVersion":0,"roundTripTime":-1,"minRoundTripTime":0,"lastUpdateTime":230495627,"lastWriteDate":0,"error":{},"topologyVersion":null,"setName":null,"setVersion":null,"electionId":null,"logicalSessionTimeoutMinutes":null,"maxMessageSizeBytes":null,"maxWriteBatchSize":null,"maxBsonObjectSize":null,"primary":null,"me":null,"$clusterTime":null,"iscryptd":false}},"stale":false,"compatible":true,"heartbeatFrequencyMS":10000,"localThresholdMS":15,"setName":"atlas-qy49pv-shard-0","maxElectionId":{"$oid":"7fffffff00000000000000ba"},"maxSetVersion":15,"commonWireVersion":0,"logicalSessionTimeoutMinutes":null},"stack":"MongoServerSelectionError: getaddrinfo ENOTFOUND jiroshop-shard-00-01.umpsu.mongodb.net\n    at Topology.selectServer (C:\\Users\\MSI\\Desktop\\project\\jiro\\node_modules\\mongodb\\lib\\sdam\\topology.js:320:38)\n    at async tryOperation (C:\\Users\\MSI\\Desktop\\project\\jiro\\node_modules\\mongodb\\lib\\operations\\execute_operation.js:143:18)\n    at async executeOperation (C:\\Users\\MSI\\Desktop\\project\\jiro\\node_modules\\mongodb\\lib\\operations\\execute_operation.js:73:16)\n    at async FindCursor._initialize (C:\\Users\\MSI\\Desktop\\project\\jiro\\node_modules\\mongodb\\lib\\cursor\\find_cursor.js:60:26)\n    at async FindCursor.cursorInit (C:\\Users\\MSI\\Desktop\\project\\jiro\\node_modules\\mongodb\\lib\\cursor\\abstract_cursor.js:607:27)\n    at async FindCursor.fetchBatch (C:\\Users\\MSI\\Desktop\\project\\jiro\\node_modules\\mongodb\\lib\\cursor\\abstract_cursor.js:641:13)\n    at async FindCursor.next (C:\\Users\\MSI\\Desktop\\project\\jiro\\node_modules\\mongodb\\lib\\cursor\\abstract_cursor.js:323:17)\n    at async [Symbol.asyncIterator] (C:\\Users\\MSI\\Desktop\\project\\jiro\\node_modules\\mongodb\\lib\\cursor\\abstract_cursor.js:240:34)\n    at async FindCursor.toArray (C:\\Users\\MSI\\Desktop\\project\\jiro\\node_modules\\mongodb\\lib\\cursor\\abstract_cursor.js:400:26)\n    at async model.Query._find (C:\\Users\\MSI\\Desktop\\project\\jiro\\node_modules\\mongoose\\lib\\query.js:2363:14)","cause":{}}}
2025-01-04 10:53:07 [ERROR]: Erreur nettoyage commandes expirées: getaddrinfo ENOTFOUND jiroshop-shard-00-01.umpsu.mongodb.net | {"metadata":{"reason":{"type":"ReplicaSetNoPrimary","servers":{"jiroshop-shard-00-01.umpsu.mongodb.net:27017":{"address":"jiroshop-shard-00-01.umpsu.mongodb.net:27017","type":"Unknown","hosts":[],"passives":[],"arbiters":[],"tags":{},"minWireVersion":0,"maxWireVersion":0,"roundTripTime":-1,"minRoundTripTime":0,"lastUpdateTime":230495625,"lastWriteDate":0,"error":{},"topologyVersion":null,"setName":null,"setVersion":null,"electionId":null,"logicalSessionTimeoutMinutes":null,"maxMessageSizeBytes":null,"maxWriteBatchSize":null,"maxBsonObjectSize":null,"primary":null,"me":null,"$clusterTime":null,"iscryptd":false},"jiroshop-shard-00-02.umpsu.mongodb.net:27017":{"address":"jiroshop-shard-00-02.umpsu.mongodb.net:27017","type":"Unknown","hosts":[],"passives":[],"arbiters":[],"tags":{},"minWireVersion":0,"maxWireVersion":0,"roundTripTime":-1,"minRoundTripTime":0,"lastUpdateTime":230495626,"lastWriteDate":0,"error":{},"topologyVersion":null,"setName":null,"setVersion":null,"electionId":null,"logicalSessionTimeoutMinutes":null,"maxMessageSizeBytes":null,"maxWriteBatchSize":null,"maxBsonObjectSize":null,"primary":null,"me":null,"$clusterTime":null,"iscryptd":false},"jiroshop-shard-00-00.umpsu.mongodb.net:27017":{"address":"jiroshop-shard-00-00.umpsu.mongodb.net:27017","type":"Unknown","hosts":[],"passives":[],"arbiters":[],"tags":{},"minWireVersion":0,"maxWireVersion":0,"roundTripTime":-1,"minRoundTripTime":0,"lastUpdateTime":230495627,"lastWriteDate":0,"error":{},"topologyVersion":null,"setName":null,"setVersion":null,"electionId":null,"logicalSessionTimeoutMinutes":null,"maxMessageSizeBytes":null,"maxWriteBatchSize":null,"maxBsonObjectSize":null,"primary":null,"me":null,"$clusterTime":null,"iscryptd":false}},"stale":false,"compatible":true,"heartbeatFrequencyMS":10000,"localThresholdMS":15,"setName":"atlas-qy49pv-shard-0","maxElectionId":{"$oid":"7fffffff00000000000000ba"},"maxSetVersion":15,"commonWireVersion":0,"logicalSessionTimeoutMinutes":null},"stack":"MongoServerSelectionError: getaddrinfo ENOTFOUND jiroshop-shard-00-01.umpsu.mongodb.net\n    at Topology.selectServer (C:\\Users\\MSI\\Desktop\\project\\jiro\\node_modules\\mongodb\\lib\\sdam\\topology.js:320:38)\n    at async tryOperation (C:\\Users\\MSI\\Desktop\\project\\jiro\\node_modules\\mongodb\\lib\\operations\\execute_operation.js:143:18)\n    at async executeOperation (C:\\Users\\MSI\\Desktop\\project\\jiro\\node_modules\\mongodb\\lib\\operations\\execute_operation.js:73:16)\n    at async FindCursor._initialize (C:\\Users\\MSI\\Desktop\\project\\jiro\\node_modules\\mongodb\\lib\\cursor\\find_cursor.js:60:26)\n    at async FindCursor.cursorInit (C:\\Users\\MSI\\Desktop\\project\\jiro\\node_modules\\mongodb\\lib\\cursor\\abstract_cursor.js:607:27)\n    at async FindCursor.fetchBatch (C:\\Users\\MSI\\Desktop\\project\\jiro\\node_modules\\mongodb\\lib\\cursor\\abstract_cursor.js:641:13)\n    at async FindCursor.next (C:\\Users\\MSI\\Desktop\\project\\jiro\\node_modules\\mongodb\\lib\\cursor\\abstract_cursor.js:323:17)\n    at async [Symbol.asyncIterator] (C:\\Users\\MSI\\Desktop\\project\\jiro\\node_modules\\mongodb\\lib\\cursor\\abstract_cursor.js:240:34)\n    at async FindCursor.toArray (C:\\Users\\MSI\\Desktop\\project\\jiro\\node_modules\\mongodb\\lib\\cursor\\abstract_cursor.js:400:26)\n    at async model.Query._find (C:\\Users\\MSI\\Desktop\\project\\jiro\\node_modules\\mongoose\\lib\\query.js:2363:14)","cause":{}}}
